// Generated by CoffeeScript 1.3.3
(function() {

  $(function() {
    $('#downloadAll').click(function() {
      console.log("downloadAll!");
      return $('#result-list a').each(function() {
        return $(this).click();
      });
    });
    return $('#search-form').submit(function(e) {
      var searchWord,
        _this = this;
      e.preventDefault();
      searchWord = $('#input').val();
      $.ajax({
        data: {
          "word": searchWord
        },
        type: 'POST',
        url: "/search/",
        beforeSend: function(jqXHR, settings) {
          $('#results').slideUp();
          return $('#message').html('<span class="alert center alert-info">查询中……</span>').fadeIn();
        },
        success: function(data, textStatus, jqXHR) {
          $('#message').fadeOut();
          $('#loading').html('<div class="progress span4 offset4 progress-striped active"><div class="bar" style="width: 40%;"></div></div>').fadeIn();
          return $('#results').slideDown();
        },
        error: function(jqXHR, textStatus, errorThrown) {
          return $('#message').html('<span class="alert center alert-info">查询失败</span>');
        }
      });
      return false;
    });
  });

}).call(this);
